# Описание модуля
Для работы с различными элементами платы создаются определенные объекты классов, представленных в модуле.  
Чтобы получить к ним доступ, модуль необходимо импортировать:  
```import RPiPWM```

## ШИМ
Для работы с микросхемой, генерирующей ШИМ сигнал необходимо создать объект класса ```RPiPWM.Pwm()```. Входных 
параметров у конструктора нет. Класс позволяет генерировать сигнал в зависимости от заданного режима работы.

##### Режимы работы
Определяются при помощи нумерованного списка ```RPiPWM.PwmMode```. Возможные значения:  

- ```servo90``` - сервопривод с углом поворота 90 градусов. Можно установить значение от 0 до 90.
- ```servo180``` - сервопривод с углом поворота 180 градусов. Можно установить значение от 0 до 180.
- ```servo270``` - сервопривод с углом поворота 270 градусов. Можно установить значение от 0 до 270.
- ```forwardMotor``` - драйвер для моторов без возможности реверса. Можно установить значение от 0 до 100.
- ```reverseMotor``` - драйвер для моторов с возможностью реверса. Можно установить значение от -100 до 100.
- ```onOff``` - задает либо высокий, либо низкий уровень сигнала на канале. Можно установить ```True``` или ```False``` (0 или 1).

##### Методы класса:

- ```InitChannel``` - инициализация канала на определенный режим работы. Входные параметры - номер канала
 и режим работы.
- ```SetChannel``` - установить значение на канале. Входные параметры - номер канала и значение.
- ```Reset``` - устанавливает на всех каналах 0 уровень (программный сброс микросхемы)

## АЦП
Для работы с АЦП необходимо создать объект класса ```RPiPWM.Battery()```. У данной микросхемы нет возможности задать
адрес вручную, поэтому изменение адреса в классе не предусмотрено.  
Констркутор класса принимает на вход
два параметра:  
- ```vRef``` - опорное напряжение в вольтах, относительно которого производится измерение (по умолчанию 3.3 В)  
- ```gain``` - коэффициент делителя напряжения (по умолчанию 7.66, т.е. во сколько раз напряжение, измеряемое АЦП
меньше напряжения питания)

##### Методы класса:  

- ```start``` - наследуется от threading.Thread. Запускает измерения в отдельном потоке (треде)
- ```stop``` - останавливает поток АЦП, нужен для корректного завершения программы
- ```GetVoltageInstant``` - возвращает моментальное значение напряжения с АЦП
- ```GetVoltageFiltered``` - возвращает отфильтрованное значение напряжения с АЦП
- ```Calibrate``` - **экспериментальная функция**, на вход функции подается значение фактического напряжения
на клеммах платы, в результате функция изменяет значение коэффициента делителя напряжения в соответствии
входным напряжением  

## I2C Дисплей
Предусмотрено подключение OLED дисплеев на базе микросхемы **SSD1306**. Для работы с дисплеем необходимо создать 
объект одного из трех классов ```RPiPWM.SSD1306_128_64()```, ```RPiPWM.SSD1306_128_32()``` или 
```RPiPWM.SSD1306_96_16()```, в зависимости от размеров дисплея. Возможность задания адреса дисплея при создании объекта
не предусмотрена, поэтому можно подключить только один указанный дисплей. Входных параметров у конструктора нет.

##### Методы класса:
- ```Begin``` - включает дисплей
- ```Image``` - сохраняет заданное изображение в буффер. Входной параметр - image - картинка, созданная с помощью
 модуля PIL. Режим картинки должен быть mode = 1 и по размеру она должна совпадать с дисплеем.
 (подробнее см. [example.py](https://github.com/victorvorobev/RPiPWM/blob/master/example.py))
- ```Display``` - выводит буффер на экран
- ```Clear``` - очищает буффер
- ```SetBrightness``` - задает яркость дисплея в диапазоне от 0 до 255  

## Кнопка и светодиод
Для работы с кнопкой и светодиодом, запаянными на плате, используется класс ```RPiPWM.Gpio```. 
При создании объекта класса дополнительные парамтеры не задаются. Кнопка связана с GPIO 20, светодиод - с GPIO 21.

##### Методы класса:
- ```ButtonAddEvent``` - связывает функцию с нажатием на кнопку. 
В качестве параметра передается непосредственно функция.
- ```LedSet``` - включает или выключает светодиод. Входной параметр - значение для светодиода (True или False)
- ```LedToggle``` - переключает состояние светодиода
- ```CleanUp``` - освобождает GPIO после завершения работы


  
